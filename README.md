# Global Wildfire Smoke Labor Productivity Analysis

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![Jupyter Notebook](https://img.shields.io/badge/Jupyter-Notebook-orange.svg)](https://jupyter.org/)

## üìã Table of Contents
- [Overview](#overview)
- [Data Sources](#data-sources)
- [Methodology](#methodology)
- [Repository Structure](#repository-structure)
- [Usage Instructions](#usage-instructions)
- [References](#references)

## üîç Overview

This repository enables the calculation and visualization of global labor productivity losses attributable to wildfire smoke. The analysis compares baseline PM2.5 concentrations with no-fire scenarios to estimate productivity hours lost due to wildfire smoke exposure. It is configured to compare RCP 8.5 projections for 2050 with modeled estimates from 2000, though the repository contains functionality to examine various climate scenarios and time horizons.

## üìä Data Sources

- **Smoke Data**: Provided by Maria Val Martin, as published in [this paper](https://agupubs.onlinelibrary.wiley.com/doi/10.1029/2018GH000144)
- **Population Data**: Sourced from [UCAR's Spatial Population Database](https://www.cgd.ucar.edu/sections/iam/modeling/spatial-population) at 1/8 degree resolution using SSP2 scenario
- **Geographic Data**: Country boundary shapefiles from [Natural Earth](https://www.naturalearthdata.com/) at 1:110m resolution

## üßÆ Methodology

The analysis employs the following approach to calculate productivity losses:

```
productivity_loss = population √ó annual_work_hours √ó productivity_loss_rate √ó PM2.5_concentration
```

Where:
- Population data is from SSP2 projections
- Annual work hours per person is assumed to be 2,000 hours
- Productivity loss rate is modeled at 0.1% per Œºg/m¬≥ of PM2.5 exposure
- PM2.5 concentration is calculated as the difference between baseline scenarios and no-fire scenarios

Only one CDO command is used to preprocess the data, making the population data fit the grid of the smoke data:

```bash
cdo remapsum,r288x192 ssp2_2050.nc ssp2_2050_matching.nc
```

## üìÅ Repository Structure

This repository contains two primary notebooks:

1. **`country_process.ipynb`**: Maps country-specific data from reference datasets onto the same grid as the smoke data
2. **`labor_productivity.ipynb`**: Calculates productivity losses at each grid cell, produces visualizations, and maps spatial data to countries for country-level impact assessment

The repository also contains the following directories:

- **`smoke_data/`**: Contains the PM2.5 concentration files and population projections
- **`labor_out/results/`**: Stores the output CSV files with productivity losses by country
- **`figures/`**: Contains visualizations generated by the analysis

## üöÄ Usage Instructions

To compute productivity losses due to wildfire smoke:

1. First run `country_process.ipynb`, which maps country-specific data onto the smoke data grid
2. Then run `labor_productivity.ipynb`, which:
   - Calculates productivity losses at each grid cell
   - Produces global visualizations of PM2.5 concentrations and productivity losses
   - Maps spatial data to countries for country-level impact assessment
   - Generates CSV output files with total and per-capita productivity losses

The analysis provides:
- Global maps of PM2.5 concentrations from wildfire smoke
- Productivity loss estimates in hours and work-years
- Country-level impact rankings and comparisons between time periods
- Per-capita productivity loss calculations to identify most affected populations

## üìö References

- Val Martin, M., et al. (2018). [Wildfire impacts on surface smoke and air quality over global scales](https://agupubs.onlinelibrary.wiley.com/doi/10.1029/2018GH000144)
- [UCAR Spatial Population Database](https://www.cgd.ucar.edu/sections/iam/modeling/spatial-population)
- He, J., et al. (2022). [Severe Air Pollution and Labor Productivity: Evidence from Industrial Towns in China]
(https://www.aeaweb.org/articles?id=10.1257/app.20170286)
